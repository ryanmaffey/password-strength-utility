/**
 * Password Strength Utility
 * -------------------------
 * Version:   1.0.2
 * Author:    Ryan Maffey
 * GitHub:    https://github.com/ryanmaffey/password-strength-utility
 * npm:       https://www.npmjs.com/package/password-strength-utility
 */
function PasswordStrength(e){function r(){var r="string"==typeof e?function(){var r=document.querySelectorAll(e);if(r.length)return void console.warn("PasswordStrength: '"+e+"' was not found.");var t=[].slice.call(r).filter(function(e){return e.hasAttribute("[data-pws]")});return t.length?new _PWS(t[0]):void console.warn("PasswordStrength: This is not a [data-pws] element.",e)}():function(){return e.hasAttribute("[data-pws]")?new _PWS(e):void console.warn(not_PWSMsg,e)}();return r&&PWS._PWSArray.push(r),r}return null==e&&void 0==e?void PWS.warn("Did you mean to pass in a selector to PasswordStrength()?"):function(){var t;if("string"==typeof e)t=PasswordStrength._PWSArray.filter(function(r){return r.password.elem.matches(e)});else{if(!(e instanceof HTMLElement))return void PWS.warn("Selector must be of type String or HtmlElement. Instead found '"+typeof e+"'.",e);t=PasswordStrength._PWSArray.filter(function(r){return r.password.elem==e})}return t.length?t[0]:r()}()}function _PWS(e){var r=this;r.password={elem:e,value:e.value},r.rules=[],r.score=0,r.label=PWS.labels[0],r.isValid=!1,r.init()}var PWS=PasswordStrength;PWS.events={scoreChange:new CustomEvent("pwsScoreChange"),labelChange:new CustomEvent("pwsLabelChange"),ruleMatchChange:new CustomEvent("pwsRuleMatchChange"),validityChange:new CustomEvent("pwsValidityChange")},PWS._PWSArray=[],PWS.setup=function(e){function r(e,r){e="Invalid PasswordStrength.setup() parameter. "+e,r?PWS.warn(e,r):PWS.warn(e)}function t(){if(!e.labels)return PWS.labels={},!0;var t,n=["0","1","2","3","4"],s=[];for(var a in e.labels)if(s.push(a),"string"!=typeof e.labels[a]){t="The value '"+e.labels[a]+"' for the '"+a+"' property on the labels object is not a string.";break}return t?void r(t):(s=s.sort(),!(n.length!=s.length||!n.every(function(e,r){return e===s[r]}))||(r("Missing required properties on the labels object. Properties of 0, 1, 2, 3 and 4 are required, with values of type 'string'.",e.labels),!1))}function n(){var t,n=["length","upper","lower","number","special"],s=0;for(var a in e.rules)if(n.indexOf(a)>-1){s++;var l=e.rules[a],o=parseInt(l);if(isNaN(o)||l!=o){t="The value '"+e.rules[a]+"' for the '"+a+"' property on the rules object is not an integer.";break}e.rules[a]=parseInt(e.rules[a])}return s?!t||(r(t),!1):(r("There are no valid rules on in the rules object.",e.rules),!1)}(function(){return e?"object"!=typeof e?(r("Parameter must be an object. Instead found '"+typeof e+"'.",e),!1):e.labels&&"object"!=typeof e.labels?(r("The labels property is not an object. Instead found '"+typeof e.labels+"'.",e.labels),!1):e.rules?"object"!=typeof e.rules?(r("The rules property must be an object. Instead found '"+typeof e.rules+"'.",e.rules),!1):t()&&n():(r("The rules property is required."),!1):(r("No parameter found."),!1)})()&&(e.labels&&(PWS.labels=e.labels),PWS.rules=e.rules,[].slice.call(document.querySelectorAll("[data-pws]")).forEach(function(e){PWS._PWSArray.push(new _PWS(e))}))},PWS.warn=function(e,r){e="PasswordStrength: "+e,r?console.warn(e,r):console.warn(e)},_PWS.prototype.addRules=function(){var e=this;return PWS.rules.length&&e.rules.push({name:"length",isPassed:function(){var r="^.{"+PWS.rules.length+",}$";return new RegExp(r,"g").test(e.password.value)}}),PWS.rules.number&&e.rules.push({name:"number",isPassed:function(){var r="(.*[0-9]){"+PWS.rules.number+"}";return new RegExp(r,"g").test(e.password.value)}}),PWS.rules.upper&&e.rules.push({name:"upper",isPassed:function(){var r="(.*[A-Z]){"+PWS.rules.upper+"}";return new RegExp(r,"g").test(e.password.value)}}),PWS.rules.lower&&e.rules.push({name:"lower",isPassed:function(){var r="(.*[a-z]){"+PWS.rules.lower+"}";return new RegExp(r,"g").test(e.password.value)}}),PWS.rules.special&&e.rules.push({name:"special",isPassed:function(){var r="(.*[\\W]){"+PWS.rules.special+"}";return new RegExp(r,"g").test(e.password.value)}}),e},_PWS.prototype.update=function(){var e=this;return function(){var r=e.rules.filter(function(e){var r=e.isPassing;return e.isPassing=e.isPassed(),r!=e.isPassing});r.length&&(PWS.events.ruleMatchChange.data=r,e.password.elem.dispatchEvent(PWS.events.ruleMatchChange))}(),function(){var r;try{r=zxcvbn(e.password.value).score}catch(t){r=Math.floor(e.rules.filter(function(e){return e.isPassing}).length/e.rules.length*4)}r!=e.score&&(e.score=r,PWS.events.scoreChange.data=r,e.password.elem.dispatchEvent(PWS.events.scoreChange))}(),function(){var r=PWS.labels[e.score];r!=e.label&&(e.label=r,PWS.events.labelChange.data=r,e.password.elem.dispatchEvent(PWS.events.labelChange))}(),function(){var r=e.rules.filter(function(e){return e.isPassing}).length==e.rules.length;r!=e.isValid&&(e.isValid=r,PWS.events.validityChange.data=r,e.password.elem.dispatchEvent(PWS.events.validityChange))}(),e},_PWS.prototype.bindEvents=function(){var e=this;return e.password.elem.addEventListener("input",function(r){e.password.value=r.target.value,e.update()}),e},_PWS.prototype.init=function(){return this.addRules().bindEvents().update()};